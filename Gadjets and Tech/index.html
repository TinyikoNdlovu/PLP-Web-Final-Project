<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ===== FontAWESOME ===== -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- ===== CSS Style Link ===== -->
    <link rel="stylesheet" href="./style.css">
    <title>User Login Register Form</title>
</head>
<body>
    <div class="container">

        <!-- Login Form -->
        <div class="forms">
            <div class="form login">
                <span class="title">Login</span>
                
                <form action="" name="loginForm" onsubmit="loginvalidation()">
                    <div class="input-field">
                        <input type="text" id="email" name="email" placeholder="Enter your email">
                        <i class="fa-solid fa-envelope icon"></i>
                    </div>
                    <div class="input-field">
                        <input type="password" id="password" name="password" class="password" placeholder="Enter your password">
                        <i class="fa-solid fa-lock icon"></i>
                        <i class="fa-solid fa-eye-slash showhidepw"></i>
                    </div>
                    <div class="checkbox-text">
                        <div class="checkbox-content">
                            <input type="checkbox" id="logcheck">
                            <label for="logcheck">Remember me</label>
                        </div>
                        <a href="#" class="text">Forget password</a>
                    </div>
                    <div class="input-field button">
                        <input type="button" id="login" value="Login">
                    </div>
                </form>
                <div class="login-signup">
                    <span class="text">Not a member</span>
                    <a href="#" class="text signup-link">Sign up</a>
                </div>
            </div>

                <!-- Registration Form -->
                <div class="form signup">
                    <span class="title">Register</span>
                    <form name="signUpForm" onsubmit="signUpValidation(event)">
                        <div class="input-field">
                            <input type="text" id="name" name="name" placeholder="Enter your name">
                            <i class="fa-solid fa-user"></i>
                        </div>
                        <div class="input-field">
                            <input type="text" id="email" name="email" placeholder="Enter you email">
                            <i class="fa-solid fa-envelope icon" ></i>
                        </div>
                        <div class="input-field">
                            <input type="password" id="password" name="password" placeholder="Create your password" class="password">
                            <i class="fa-solid fa-lock icon"></i>
                            <i class="fa-solid fa-eye-slash showhidepw"></i>
                        </div>
                        <div class="input-field">
                            <input type="password" id="confirmpwd" name="confirmpwd" placeholder="Confirm password" class="password">
                            <i class="fa-solid fa-lock icon"></i>
                            <i class="fa-solid fa-eye-slash showhidepw"></i>
                        </div>
                        <div class="checkbox-text">
                            <div class="checkbox-content">
                                <input type="checkbox" id="termCon">
                                <label for="termCon" class="text">I accept all terms and conditions</label>
                            </div>
                        </div>
                        <div class="input-field button">
                            <input type="button" id="signup" value="Sign Up">
                        </div>
                    </form>
                    <div class="login-signup">
                        <span class="text">Already a member?
                            <a href="#" class="text login-link">Login Now</a>
                        </span>
                    </div>
                
            </div>
        </div>
    </div>

    <!-- ===== JavaScript Link ===== -->
    <script src="./script.js"></script>

    <!-- ===== Firebase Config Link ===== -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
        import {  getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyAmSwdWWeFMQmR9rFp0gvO0IqdEQJIxMaY",
          authDomain: "gadjets-tech-23d23.firebaseapp.com",
          projectId: "gadjets-tech-23d23",
          storageBucket: "gadjets-tech-23d23.appspot.com",
          messagingSenderId: "445360651320",
          appId: "1:445360651320:web:9c9166bd2d057242c23acd"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        console.log(app)

        //----- New User Registration code start	  
	  document.getElementById("signup").addEventListener("click", function() {
          var name = document.getElementById("name")
		  var email =  document.getElementById("email").value;
		  var password = document.getElementById("password").value;
          var confirmpwd = document.getElementById("confirmpwd")
		  //For new registration
		  createUserWithEmailAndPassword(auth, email, password)
		  .then((userCredential) => {
		    // Signed in 
		    const user = userCredential.user;
		    console.log(user);
		    alert("Registration successfully!!");
		    // ...
		  })
		  .catch((error) => {
		    const errorCode = error.code;
		    const errorMessage = error.message;
		    // ..
		    console.log(errorMessage);
		    alert(error);
		  });		  		  
	  });
	  //----- End of User Registration code

      //----- User Login code start	  
	  document.getElementById("login").addEventListener("click", function() {
		  var email =  document.getElementById("email").value;
		  var password = document.getElementById("password").value;

		  signInWithEmailAndPassword(auth, email, password)
		  .then((userCredential) => {
		    // Signed in 
		    const user = userCredential.user;
		    console.log(user);
		    alert(user.email+" Login successfully!!!");
		    document.getElementById('logout').style.display = 'block';
		    // ...
		  })
		  .catch((error) => {
		    const errorCode = error.code;
		    const errorMessage = error.message;
		    console.log(errorMessage);
		    alert(errorMessage);
		  });		  		  
	  });
	  //----- End of User Login code

       //----- User Logout code start	  
	  document.getElementById("logout").addEventListener("click", function() {
		  signOut(auth).then(() => {
			  // Sign-out successful.
			  console.log('Sign-out successful.');
			  alert('Sign-out successful.');
			  document.getElementById('logout').style.display = 'none';
			}).catch((error) => {
			  // An error happened.
			  console.log('An error happened.');
			});		  		  
	  });
	  //----- End of User Logout code

      </script>
    
</body>
</html>